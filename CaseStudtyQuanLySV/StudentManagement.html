<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/CaseStudtyQuanLySV/Student.js"></script>
    <script src="/CaseStudtyQuanLySV/BanMaiClass.js"></script>
    <script src="const.js"></script>
</head>

<body>
<table>
    <tr>
        <th>Quản lý học viên lớp Ban Mai</th>
        <td>Sĩ số lớp:</td>
        <td id="sum"></td>
        <th>
            <a href="FormRegister.html" target="_blank">Add</a>
        </th>
    </tr>
</table>
<table border="1">
    <thead>
    <th>TT</th>
    <th>Họ và tên</th>
    <th>Ngày sinh</th>
    <th>Giới tính</th>
    <th>Địa chỉ</th>
    <th>Họ tên phụ huynh</th>
    <th>SĐT phụ huynh</th>
    <th>Ghi chú</th>
    <th>Sửa</th>
    <th>Xoá</th>
    </thead>
    <tbody id="data"></tbody>
</table>
<script>
    let lopBanMai = new LopBanMai()
    // let student = new Student();
    // student = JSON.parse(localStorage.getItem('listStudents'))
    // lopBanMai.addStudent(new Student("name_1", "12/12/1992", "male", "address", "parent", "phone", "note"));
    // lopBanMai.addStudent(new Student("name_2", "12/12/1992", "male", "address", "parent", "phone", "note"));
    // lopBanMai.addStudent(new Student("name_3", "12/12/1992", "male", "address", "parent", "phone", "note"));
    // lopBanMai.addStudent(new Student("name_4", "12/12/1992", "male", "address", "parent", "phone", "note"));
    // lopBanMai.addStudent(new Student("name_5", "12/12/1992", "male", "address", "parent", "phone", "note"));
    // localStorage.setItem(KEY_STUDENT_LIST,JSON.stringify(lopBanMai.getStudents()))
    show()
    // if (typeof (Storage) !== 'undefined') {
    //     show()
    // }

    function clickBtnAdd() {
        window.location.href = "FormRegister.html"
    }

    function show() {
        getStudentFromLocal()
        let students = lopBanMai.getStudents()
        let str = "";
        for (let i = 0; i < students.length; i++) {
            str += `
            <tr>
                <td>${i + 1}</td>
                <td>${students[i].name}</td>
                <td>${students[i].dob}</td>
                <td>${students[i].gender}</td>
                <td>${students[i].address}</td>
                <td>${students[i].parents}</td>
                <td>${students[i].phone}</td>
                <td>${students[i].note}</td>
                <td><button type="button" onclick="edit()">Edit</button></td>
                <td><button type="button" onclick="delete()">Delete</button></td>
            </tr>
            `
        }
        document.getElementById("data").innerHTML = str
        document.getElementById("sum").innerText = students.length
    }

    function getStudentFromLocal() {
        if (localStorage.getItem(KEY_STUDENT_LIST)) {
            lopBanMai.setStudents(JSON.parse(localStorage.getItem(KEY_STUDENT_LIST)))
        } else lopBanMai.setStudents([])
    }

</script>
</body>

</html>